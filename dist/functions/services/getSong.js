"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const child_process_1=require("child_process"),path_1=__importDefault(require("path")),os_1=__importDefault(require("os")),fs_1=__importDefault(require("fs"));exports.default=async e=>{e||console.error("No id provided.");const o=path_1.default.join(os_1.default.homedir(),"Music","YouTube-Music");fs_1.default.existsSync(o)||(fs_1.default.mkdirSync(o,{recursive:!0}),console.log(`Created folder: ${o}`));const t=["yt-dlp","-f","bestaudio/best","--extract-audio","--audio-format","mp3","--audio-quality","0","-o",`"${path_1.default.join(o,"%(title)s.%(ext)s")}"`,`"https://www.youtube.com/watch?v=${e}"`].join(" ");return console.log(`Starting audio download to: ${o}`),new Promise((e,r)=>{const s=(0,child_process_1.exec)(t);if(!s.stdout||!s.stderr)return r(new Error("Failed to get child process streams."));s.stdout.on("data",e=>{process.stdout.write(e.toString())}),s.stderr.on("data",e=>{process.stderr.write(e.toString())}),s.on("close",t=>{0===t?(console.log("\nAudio download complete!"),console.log(`File saved in: ${o}`),e(o)):(console.error(`\nDownload failed with exit code ${t}`),r(new Error(`Download failed with exit code ${t}`)))})})};